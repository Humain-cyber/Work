
{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- ========================= SECTION MAIN ========================= -->
<section class="section-intro py-3">
  <div class="container">
    <div class="intro-banner-wrap">
      <img src="{% static 'images/banners/cover.jpg' %}" class="img-fluid rounded w-100" alt="Banner">
    </div>
  </div>
</section>
<!-- ========================= SECTION MAIN END// ========================= -->

<!-- ========================= SECTION POPULAR PRODUCTS ========================= -->
<section class="section-name py-4">
  <div class="container">
    <header class="section-heading d-flex justify-content-between align-items-center mb-4">
      <h3 class="section-title mb-0">Popular products</h3>
      <a href="{% url 'store' %}" class="btn btn-outline-primary btn-sm">See all</a>
    </header>

    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
      {% for product in products %}
      <div class="col">
        <div class="card h-100 shadow-sm border-0">
          <!-- Image -->
          <a href="{{ product.get_url }}" class="img-wrap d-block bg-white p-3" style="height: 200px; overflow: hidden;">
            <img src="{{ product.images.url }}" class="img-fluid h-100" style="object-fit: contain;" alt="{{ product.product_name }}">
          </a>

          <!-- Body -->
          <div class="card-body d-flex flex-column text-center">
            <h6 class="card-title mb-1 fw-semibold">
              <a href="{{ product.get_url }}" class="text-decoration-none text-dark">{{ product.product_name }}</a>
            </h6>
            <p class="text-success fw-bold mb-1">${{ product.price }}</p>

            <!-- Rating -->
            <div class="rating-star mb-2">
              <span>
                <i class="fa fa-star{% if product.averageReview < 0.5 %}-o{% elif product.averageReview < 1 %}-half-o{% endif %}"></i>
                <i class="fa fa-star{% if product.averageReview < 1.5 %}-o{% elif product.averageReview < 2 %}-half-o{% endif %}"></i>
                <i class="fa fa-star{% if product.averageReview < 2.5 %}-o{% elif product.averageReview < 3 %}-half-o{% endif %}"></i>
                <i class="fa fa-star{% if product.averageReview < 3.5 %}-o{% elif product.averageReview < 4 %}-half-o{% endif %}"></i>
                <i class="fa fa-star{% if product.averageReview < 4.5 %}-o{% elif product.averageReview < 5 %}-half-o{% endif %}"></i>
              </span>
            </div>

            <!-- Button -->
            <a href="{{ product.get_url }}" class="btn btn-outline-primary btn-sm mt-auto">View Details</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
<!-- ========================= SECTION END// ========================= -->




{% endblock %}